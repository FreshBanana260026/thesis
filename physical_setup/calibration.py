import numpy as np

from computer_vision import D435

d435 = D435()

color_intrinsics = d435.get_entrinsics()

# take 20 coords
cam_coords = [[316, 203, 537],
              [244, 250, 419],
              [341, 123, 412],
              [415, 193, 595],
              [226, 234, 642],
              [198, 139, 607],
              [308, 200, 630],
              [184, 246, 648],
              [254, 199, 343],
              [205, 161, 554],
              [444, 244, 502],
              [379, 208, 381],
              [469, 216, 495],
              [333, 169, 435],
              [244, 148, 520],
              [316, 155, 613],
              [194, 183, 528],
              [287, 256, 641],
              [252, 238, 740],
              [280, 189, 446]]

robot_coords = [[253.8, -492.15, 379.5],
                [317.11, -453.95, 494.14],
                [232.37, -570.9, 501.67],
                [130.55, -507.4, 324.1],
                [380.22, -444.11, 275.7],
                [413.8, -570.5, 312.15],
                [264.9, -493.35, 290.15],
                [436.18, -425.56, 272.3],
                [295.1, -503.57, 573.0],
                [385.25, -539.63, 366.7],
                [114.25, -456.36, 412.27],
                [197.34, -499.12, 533.05],
                [88.5, -484.5, 421.11],
                [234.55, -532.5, 482.05],
                [333.87, -555.1, 397.35],
                [254.5, -552.28, 308.5],
                [388.55, -514.64, 388.88],
                [293.77, -415.05, 277.73],
                [358.47, -428.8, 185.72],
                [286.3, -511.1, 468.8]]

cam_points_meters = []

for i in cam_coords:
    cam_points_meters.append([((i[0] - color_intrinsics.ppx) * (i[2]/1000)) / color_intrinsics.fx, ((i[1] - color_intrinsics.ppy) * (i[2]/1000)) / color_intrinsics.fy, i[2]/1000])

print(cam_points_meters)

robot_points_meters = []

for i in robot_coords:
    robot_points_meters.append([i[0]/1000, i[1]/1000, i[2]/1000])

print(robot_points_meters)
